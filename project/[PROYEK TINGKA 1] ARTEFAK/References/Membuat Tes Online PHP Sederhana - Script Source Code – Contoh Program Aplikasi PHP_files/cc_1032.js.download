(function(){var n="0.1.37",e,a="undefined",t=25,r=parseInt(1e3/t),i=e,o={"function":!0,object:!0},s={DEBUG_MODE:!1,counterID:"1032",instanceID:"externalConf###Instanceid"},u=function(n){return typeof n!==a},c="HISTATS_CANVAS_DEBUG_ON";s.DEBUG_MODE=u(window[c])&&1==window[c];var f=function(){return s.instanceID},l="_HistatsCounterGraphics_",d,v=function(){return l+s.counterID},h=function(n){return!("string"!=typeof n||""==n)},b=function(){try{s.DEBUG_MODE&&u(console)&&console.log.apply(this,arguments)}catch(n){}},p=function(a,t){var o=a||{};try{var c=function(n){var e="autostart";return"undefined"!=typeof n[e]&&n[e]===!0},f={ANIMATION_RUNNING_STATUS:!0,ANIMATION_STARTED:!1,AUTOSTART:c(o),_STOPPED:!1,INSTANCE_ID:"-"+parseInt(1e4*Math.random())},l=function(){return f.INSTANCE_ID},h=100,p=1,g=function(){return t.document},w=function(n){return u(n)&&!!g().getElementById(n)},m=function(n){i=t.setTimeout(n,r)},A=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||m,C=t["Date"]||{},T=function(n,e){for(var a in n)e.hasOwnProperty(a)&&(e[a]=n[a])};o.getInstanceID=l;var x=v();o.IS_HISTATS_CANVAS=!0,o.globalObjectName=x,o.$window=t;var B=function(n){return w(n)?g().getElementById(n):e},y={w:0,h:0,yBase:0,xBase:0,hasShadow:!1,hasLabel:!1,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:1,doMouseOverOut:1},S={msLastFrameDrawn:0,msPerFrame:r,frameCounter:0,isInAnimationTransition:!1,animation_duration_inFrames:20,waitframesBetweenTwoAnimations:80,framesBetweenTwoAnimations:100,currentLoopFrame:0,autoTriggerTextChange_onFrame:e,customization:{}},_={domCanvasObject:null,canvas2dContext:null,canvasProperties:y},O=function(){var n={},a=n.hasOwnProperty,t=0,r=0,i={blockMessages:!1,recordMessages:!1,messageLog:[],printMessages:!1,messagePassedCount:0,subscribersCount:0,topicsCount:0,_topics:n},o=function(e){return a.call(n,e)},s=function(e){return i.printMessages&&console.log(l(),"addTopic",e),r++,i.topicsCount++,r>50&&b(l(),"Lot of topics registered!",e),n[e]=[]},u=function(e){return n[e]},c=function(e,a,r){i.printMessages&&console.log(l(),"subscribe",e,a,r),i.recordMessages&&i.messageLog.push(["subscribe",e,a,r]),r=r||h,o(e)||s(e);var c=u(e).push({callback:a,priority:a})-1;return t++,i.subscribersCount++,t>50&&b(l(),"Lot of topics registered!",e),{remove:function(){delete n[e][c]}}},f=function(n,e){var a="no-topic-found";n!=a&&d(a,{topic:n,info:e})},d=function(a,t){return i.messagePassedCount++,i.printMessages&&console.log(l(),"publish",a,t),i.recordMessages&&i.messageLog.push(["publish",a,t]),i.blockMessages?void 0:o(a)?(n[a].slice().sort(function(n,e){return n.priority-e.priority}).forEach(function(n){n.callback(t!=e?t:{})}),void 0):(f(a,t),void 0)},v=function(n,e){A(function(){d(n,e)})};return{subscribe:c,publish:d,publishAsync:v,debugObj:i}}(),N=function(){return s.counterID},I=function(){var n="siteId";return o[n]=o[n]||0},E=function(){var n="main_div_name";return o[n]||"histats_counter_"+I()+"_"+N()},k=[],P=function(){return d=E(),d},F=function(){return P()+"_canvas"},R=function(){return"http://www.histats.com/viewstats/?sid="+I()+"&ccid="+N()},D=function(){t.location=R()},M=function(){if(1==_.canvasProperties.doMouseOverOut){var n=Z().canvasProperties;n.yBase=2,n.xBase=2,n.shadowOffsetX=0,n.shadowOffsetY=0}Z().domCanvasObject.style.cursor="pointer"},U=function(){if(1==_.canvasProperties.doMouseOverOut){var n=Z().canvasProperties;n.yBase=0,n.xBase=0,n.shadowOffsetX=2,n.shadowOffsetY=2}},V=function(){var n=Z(),e=n.canvasProperties,a=n.canvas2dContext;a.shadowOffsetX=e.shadowOffsetX,a.shadowOffsetY=e.shadowOffsetY,a.shadowBlur=e.shadowBlur,a.shadowColor="rgba(0,0,0,0.2)"},L=function(){return B(P())},G=function(){var n=!!L();return n},X=function(){try{if(!G())return O.publish("error",{msg:"validateDomcontainer not found"}),void 0;var n=L(),e=Z().canvasProperties,a='<canvas id="'+F()+'" width="'+e.w+'" height="'+e.h+'" ></canvas>',r='<a href="'+R()+'" target="_blank">'+a+"</a>";n.innerHTML=r,Z().domCanvasObject=B(F());var i=Z().domCanvasObject;Z().canvas2dContext=i.getContext("2d"),"addEventListener"in t?(i.addEventListener("mouseover",function(){M()}),i.addEventListener("mouseout",function(){U()})):i.onclick=function(){D()}}catch(o){b(l(),"drawCanvas",o)}},q=function(){try{if(f.ANIMATION_STARTED)return;if(f._STOPPED)return;O.publish("draw-callback-requested-reconfiguration",{}),O.publish("starting_pre",{context:o}),f.ANIMATION_STARTED=!0,O.publish("started",{context:o}),O.publish("drawcanvas_pre",{context:o}),X(),O.publish("drawcanvas_post",{context:o}),K(),O.publish("animationLoop_started",{context:o})}catch(n){b(l(),"startNow",n,n.message)}},j=function(n,e,a){e.addEventListener?e.addEventListener(n,a,!1):e.attachEvent?e.attachEvent("on"+n,a):e[n]=a},H=function(){try{O.publish("appendedStart",{context:o,type:"animFrame"}),A(q)}catch(n){b(l(),"startAsap",n.message,n)}},W=function(n,e){k.push({name:n,callback:e})},z=function(){},J=function(){k.forEach(function(n){n.callback(o.getCanvas2dContext(),S,Z())})},Y=function(){u(i)&&t.clearTimeout(i)},K=function(){f._STOPPED||A(function(){en(J),f.ANIMATION_RUNNING_STATUS&&K()})};O.subscribe("setAnimationProperties",function(n){T(n,S)}),O.subscribe("draw-callback-publish-reconfiguration",function(n){try{n.canvasCallbacks.forEach(function(n){k.push({name:n.name,callback:n.cb,priority:n.priority})}),k=k.slice().sort(function(n,e){return n.priority-e.priority})}catch(e){b(l(),"animationLoop",e.message,e)}}),O.subscribe("configuration-changed",function(n){k=[],O.publish("draw-callback-requested-reconfiguration",{})});var Q=function(n){var e=n!=f.ANIMATION_RUNNING_STATUS;return e&&(0==f.ANIMATION_RUNNING_STATUS&&1==n,1==f.ANIMATION_RUNNING_STATUS&&0==n&&Y(),f.ANIMATION_RUNNING_STATUS=n),e},Z=function(){return _},$=function(){var n=!1;0==S.frameCounter&&O.publish("FIRST-FRAME",{});var e=C.now(),a=e-S.msLastFrameDrawn;if(a>S.msPerFrame){var t=a%S.msPerFrame;S.msLastFrameDrawn=e-t,n=!0}return n},nn=function(){if(!(S.animation_duration_inFrames<1)){var n=S.animation_duration_inFrames+S.waitframesBetweenTwoAnimations;S.currentLoopFrame=S.frameCounter%n;var e=0==S.currentLoopFrame,a=S.currentLoopFrame>=S.animation_duration_inFrames;e&&(S.isInAnimationTransition=!0,O.publish("drawing-triggered-animation-start",S)),a&&S.isInAnimationTransition&&(S.isInAnimationTransition=!1,O.publish("drawing-triggered-animation-end",S))}},en=function(n){var e=$();e&&(S.frameCounter++,nn(),n())},an=function(n){return n(o.getCanvas2dContext())},tn=function(){var n=17,e=2,a=1,t=Z().canvasProperties,r=0;t.hasShadow&&(r=r+e+a),t.hasLabel&&(t.h=t.h+n),t.w=t.w+r,t.h=t.h+r},rn=function(n){T(n,Z().canvasProperties),tn()};O.subscribe("setCanvasProperties",rn,10);var on=function(){o.onCanvas2dContext(function(n){var e=Z().canvasProperties;n.clearRect(0,0,e.w,e.h),e.hasShadow&&V()})};O.subscribe("clear-canvas-rectangle",on,10);var sn=function(n,e){Z().hasShadow&&(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,n.shadowColor="transparent")},un=function(n,a){a.autoTriggerTextChange_onFrame!==e&&a.currentLoopFrame==a.autoTriggerTextChange_onFrame&&O.publish("drawing-change-text",{})},cn=function(n){O.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:sn,priority:14,name:"stopApplyingShadowOnCanvas"},{cb:un,priority:5,name:"autoUpdateText"}]})};O.subscribe("draw-callback-requested-reconfiguration",cn,15),o.__CODE_VERSION=n,o.getCanvasObject=Z,o.getCanvas2dContext=function(){return Z().canvas2dContext},o.onCanvas2dContext=an,o.getXYCanvas=function(){return{x:Z().canvasProperties.xBase,y:Z().canvasProperties.yBase}},o.addDrawCallback=W,o.getCanvasProperties=function(){return Z().canvasProperties},o.setCanvasProperties=function(n){for(var e in n)n.hasOwnProperty(e)&&(_.canvasProperties[e]=n[e])},o.updateCanvasProperties=function(n){o.setCanvasProperties(n(Z().canvasProperties))},o.getAnimationFrames=function(){return S.frameCounter},o.getAnimationControl=function(){return S},o.setAnimationControl=function(n){for(var e in n)n.hasOwnProperty(e)&&(S[e]=n[e])},o.start=H,o.changeRunningStatus=Q,o.getRunningStatus=function(){return f.ANIMATION_RUNNING_STATUS},o.eventBus=O,o.getDebugMode=function(){return s.DEBUG_MODE},function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var e=n.bars={},a=!1,t=3,r=1,i=0,o=[2,5,10];n.eventBus.subscribe("set-bars-params",function(e){f(e),n.eventBus.publish("configuration-changed",{})});var s=[],u={xBase:5,yBase:13,hMin:2,hMax:10,w:4,barsColours:[["#3e8bfd","#2572e4"],["#feb23f","#dc901d"],["#d83f3f","#b41b1b"]],parent:n},c=function(){return u},f=function(n){for(var e in n)n.hasOwnProperty(e)&&(u[e]=n[e])},l=function(n){a=!0;for(var e=0;t>e;e++)n.push({x:e*(u.w+1),y:0,width:u.w,height:o[e],animateDirection:r,gradient:null,gradientStart:u.barsColours[e][0],gradientEnd:u.barsColours[e][1]})},d=function(e){var a=.5,t=e.height,o=n.getXYCanvas();e.animateDirection==r&&t>=u.hMax?e.animateDirection=i:e.animateDirection==i&&t<=u.hMin&&(e.animateDirection=r),t+=a*(e.animateDirection==r?1:-1),e.y=u.yBase-t+o.y,e.height=t},v=function(e){return function(a){var t=n.getXYCanvas();a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0,a.beginPath(),a.fillStyle=p(e,a),a.fillRect(t.x+u.xBase+e.x,e.y,e.width,e.height)}},h=function(e){n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:b,priority:20,name:"bars_draw"}]})};n.eventBus.subscribe("draw-callback-requested-reconfiguration",h,11);var b=function(){a||l(s);for(var e in s)if(s.hasOwnProperty(e)){var t=s[e];d(t),n.onCanvas2dContext(v(t))}},p=function(e,a){var t=n.getXYCanvas(),r=u.xBase,i=a.createLinearGradient(r+e.x+t.x,e.y,r+e.x+e.width,e.height+e.y);return i.addColorStop(0,e.gradientStart),i.addColorStop(1,e.gradientEnd),i};e.getBoxProperties=c,e.setBoxProperties=f,e.transformBarsColour=function(n){barsColours=n(u.barsColours)},e.draw=b}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var a=n.statsText={},t={xBase:0,yBase:0},r=function(){return t},i=function(){var e=n.getXYCanvas();return t.xBase=e.x,t.yBase=e.y,t},o=[],s={stats_values:[],indexStatToShow:0,drawValueCallback:e,drawValueCallbackWithValue:e,drawMetricCallback:e},u=25,c=0,f=function(){return c%u==1},l=function(n){o=n};n.eventBus.subscribe("set-textbox-style",function(e){o=e,n.eventBus.publish("configuration-changed",{})}),n.eventBus.subscribe("canvas-drawValueFunction",function(n){"undefined"!=typeof n["transformationFunction"]&&(s.drawValueCallback=n["transformationFunction"])});function d(n,e,a,t){n=(n+"").replace(/[^0-9+\-Ee.]/g,"");var r=isFinite(+n)?+n:0,i=isFinite(+e)?Math.abs(e):0,o="undefined"==typeof t?",":t,s="undefined"==typeof a?".":a,u="",c=function(n,e){var a=Math.pow(10,e);return""+(Math.round(n*a)/a).toFixed(e)};return u=(i?c(r,i):""+Math.round(r)).split("."),u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(u[1]||"").length<i&&(u[1]=u[1]||"",u[1]+=new Array(i-u[1].length+1).join("0")),u.join(s)}var v=function(a){if(s.stats_values=a,s.drawValueCallback!=e){var t=a[0].value;s.drawValueCallbackWithValue=s.drawValueCallback(t)}n.eventBus.publish("configuration-changed",{})},h=function(){return s.stats_values},b=function(n){if(n===s.stats_values)return!1;if(typeof n==typeof[])for(var e in n)if(n.hasOwnProperty(e)&&typeof n[e]!=typeof{})return!1;return!0},p=function(){return n.globalObjectName+"_setValues"},g=function(){if(f()){var e=p();if("undefined"!=typeof n.$window&&"undefined"!=typeof n.$window[e]){var a=n.$window[e];b(a)&&v(a)}}},w=function(n){return(""+n).match(/^\s*[0-9]+\s*$/)?d(n,0,""," "):n},m=function(e,a){return function(t){t.shadowColor="transparent",t.font=e.name.font,t.textAlign=e.name.align,t.fillStyle=e.name.color,t.fillText(a.name,e.name.x+r().xBase,e.name.y+r().yBase),t.font=e.value.font,t.textAlign=e.value.align,t.fillStyle=e.value.color;var i=a.value;try{i=w(a.value)}catch(o){n.debug(o)}t.fillText(i,e.value.x+r().xBase,e.value.y+r().yBase)}},A=function(){s.indexStatToShow+=o.length,s.indexStatToShow>=s.stats_values.length&&(s.indexStatToShow=0)},C=!1;n.eventBus.subscribe("draw-hideText",function(n){C=!0},11),n.eventBus.subscribe("draw-unHideText",function(n){C=!1},11);var T=function(n){if(!C){var e,a,t=s.indexStatToShow,r=h(),i=r.length;r.length>o.length&&(i=o.length);for(var u=0;i>u&&(t>=r.length&&(t=0),r[t]);u++)e=o[u],a=r[t],m(e,a)(n),t++}},x=function(n,a){return c++,g(),i(),s.drawValueCallbackWithValue!=e?(s.drawValueCallbackWithValue(n),void 0):(T(n),void 0)},B=function(e){n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:x,priority:15,name:"show_stats_draw"}]})};n.eventBus.subscribe("draw-callback-requested-reconfiguration",B,11);var y=n.eventBus.subscribe("drawing-change-text",A,10);a.draw=x,a.setBoxes=l,a.setValues=v}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var a={main:"",source:e,loaded:!1};a.main="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAXCAMAAADeM0atAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAE+UExURQAAACJVdyFQbyBOaiFRdyRUeCRVeSNUeSRUeCJVdxEiACNVeCFSex9JXyNTeSVafSRUeSNVeBg9QSBOaiRVeRtxp0CVuBtzqECTuD+Rtxx1qD6Ptz6Oti2CsBx3qRpvp0GWuEKYuRltphlrpUKauUKbunu6zxhppRdnpFyTvzl9sXa2zE+MulOkwFGTr2WtxjNxkzJ9rzV0oUSGsyZ3q16nw0iZul6bwXm0zXixzHmzzXewzHevy1+fwl+ewl6cwmunx0B0nCJRckyMuVGRvCFahEeJtyBVejp/siNeikWcu3WzyW2yymGeuFCiv2WguW6vyUyfvFChvjZ5mkGGpUaTsVqeu0qIuCJSbkKEtUuHtXO0y16awWGivjp7myJSdCNWe0+LuXKxylOOu0qHuDNmiihyqjx4piphijl8sW8rDikAAAAUdFJOUwBvv28vf8/vvw8Pnx/PX++P3z9/M+D8rwAAAOFJREFUGBnNwQNiA1EABNBJms3/W2NqpMZubKO2beP+F2h7i3kPgBuw1lCFtQEXf0ImGT/aWxSxfxBPmhDQac79RGx3QcRhLOFf9LjoOPNP56Wc3D32wlzmZsTkHvrA4/y0mPwrweKQnCLB8oicMsHSqJwSwcq4nArB6oScKsHmpJwmwdqUnBrB+picOsHGsJwGwcKgnALB9WxETPaeWM2kZsWkMgY2vTYnZjMdRNtG9GZJynZ0qxvt4evbN8/7XNbgeS9XO2EAbvD5o/X1vqLhp/X91OXiX8hxLFU4A/0AfgEl95rqoubHBQAAAABJRU5ErkJggg==";var t=function(e){var t=a.source=new Image;t.onload=function(){a.loaded=!0,n.eventBus.publish("background-image-loaded",a),n.eventBus.publish("configuration-changed",{})},t.src=a.main};n.eventBus.subscribe("FIRST-FRAME",t,5),n.image_base64_src=a}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var a=n.counter={};a.ID="1032",a.properties={w:150,h:23,hasShadow:!0};var t=!1,r={backgroundImageObject:e},i={xBase:6,yBase:17,barsColours:[["#aed1dd","#aed1dd"],["#aed1dd","#aed1dd"],["#aed1dd","#aed1dd"]]},o={animation_duration_inFrames:20,autoTriggerTextChange_onFrame:10,waitframesBetweenTwoAnimations:110},s=[{name:{x:26,y:16,align:"left",color:"#fff",font:"11px Arial"},value:{x:145,y:16,align:"right",color:"#fff",font:"11px Arial"}}];n.eventBus.publish("set-textbox-style",s),n.eventBus.publish("setCanvasProperties",a.properties),n.eventBus.publish("setAnimationProperties",o),n.eventBus.publish("set-bars-params",i);var u=function(e,a){n.eventBus.publish("clear-canvas-rectangle",{});var t=n.getXYCanvas();e.drawImage(r.backgroundImageObject.source,t.x,t.y)},c=function(a){r.backgroundImageObject!=e&&n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:u,priority:10,name:"drawBackground"}]})};return n.eventBus.subscribe("draw-callback-requested-reconfiguration",c,13),n.eventBus.subscribe("background-image-loaded",function(n){r.backgroundImageObject=n},13),n}.call(o),f.AUTOSTART&&o.start()}catch(fn){}return o},g="base.js",w=window,m="_DEBUG_HISTATSCANVAS_RETURN_BUILDER";_value_RETURN_BUILDER=u(window[m])&&window[m]===!0,window[v()]=p,window["histats_canvascounters_"+g]=p}).call(this);